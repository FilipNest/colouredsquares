<!DOCTYPE HTML>

<html lang="en">

<head>

  <meta name="viewport" content="width=device-width,
initial-scale=1.0">

  <meta charset="utf-8">

  <link rel="stylesheet" href="/style.css">

  <title>Squarefield {{req.squarefieldColour.red}}-{{req.squarefieldColour.green}}-{{req.squarefieldColour.blue}} | Coloured Squares</title>

</head>

<body style="background-color:rgb({{req.squarefieldColour.red}},{{req.squarefieldColour.green}},{{req.squarefieldColour.blue}})">

  <header>

    <nav>
      <ul>
        <li>
          <a href="/"><h1>Coloured Squares</h1></a></li>
        <li>
          <a href="#about">About</a></li>
      </ul>
    </nav>

  </header>

  <main>

    <form method="post" id="interface">

      <div id="left">

        <fieldset id="squarefield">

          <legend class="visually-hidden">Squarefield squares:</legend>

          {{#each field.squares}}

          <button type="submit" name="square" value={{@index}} class="square" style="background-color:rgb({{this.colour.red}},{{this.colour.green}},{{this.colour.blue}}); border-color:rgb({{this.author.red}},{{this.author.green}},{{this.author.blue}})">
            <time datetime="{{this.machineTime}}">{{this.humanTime}}</time>
            Colour: {{this.colour.red}},{{this.colour.green}},{{this.colour.blue}} Author: {{this.author.red}},{{this.author.green}},{{this.author.blue}}
          </button>

          {{/each}}

        </fieldset>

        <fieldset id="bottom">

          <legend hidden>Colour:</legend>

          <div id="sliders" style="display:none">

            <label class="visually-hidden" for="slide-red">Red</label>
            <input id="slide-red" value="{{req.query.redSlider}}" type="range" name="slide-red" min="0" max="256" />
            <label class="visually-hidden" for="slide-green">Green</label>
            <input id="slide-green" value="{{req.query.greenSlider}}" type="range" name="slide-green" min="0" max="256" />
            <label class="visually-hidden" for="slide-blue">Blue</label>
            <input id="slide-blue" value="{{req.query.blueSlider}}" type="range" name="slide-blue" min="0" max="256" />

          </div>

          <div id="text-colours">

            <label class="visually-hidden" for="red">Red</label>
            <input style="color:red;" value="{{req.query.redSlider}}" id="red" type="number" name="red" min="0" max="256" />
            <label class="visually-hidden" for="green">Green</label>
            <input style="color:green;" value="{{req.query.greenSlider}}" id="green" type="number" name="green" min="0" max="256" />
            <label class="visually-hidden" for="blue">Blue</label>
            <input style="color:blue;" value="{{req.query.blueSlider}}" id="blue" type="number" name="blue" min="0" max="256" />

          </div>

        </fieldset>

        <button id="refresh" name="refresh" value="refresh">Refresh</button>

      </div>

      <div id="right">

        <div class="control-wrapper">
          <button title="Paint: Paint over latest, Copy: Copy latest" type="submit" id="home" value="home" name="home">Home
          </button>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 65">
            <polygon style="fill:rgb({{req.homeLastUpdated.author.red}},{{req.homeLastUpdated.author.green}},{{req.homeLastUpdated.author.blue}})" points="8.83 65 61.17 65 61.17 32.5 64.17 35.67 70 27 56.67 18 56.67 1.83 47.83 1.83 47.5 10.17 35 0 0 27 5.33 34 9 30.83 8.83 65" />
            <polygon style="fill:rgb({{req.homeLastUpdated.colour.red}},{{req.homeLastUpdated.colour.green}},{{req.homeLastUpdated.colour.blue}});" points="14.83 59.33 54.83 59.33 54.83 28.17 35 13.33 14.83 28.33 14.83 59.33" />
          </svg>
        </div>

        <fieldset id="mode">

          <legend>Mode</legend>

          <div class="control-wrapper" id="paint-wrapper">

            <label for="paint">Paint</label>
            <input type="radio" name="mode" id="paint" value="paint" {{#ifCond req.query.mode "paint"}} checked {{/ifCond}}/>
            <svg id="bulb" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 89.6 140">
              <path class="st0" style="fill: rgb(256, 0, 0);" d="M24.4,102.6l1,36.7l41.1,0.7l0.1-12.5l-0.7-25.7c0,0-7.5,3.8-19.6,4.3C34.2,106.7,24.4,102.6,24.4,102.6z"></path>
              <path style="fill: #FFFFFF; stroke: #000000;" class="st1" d="M89.1,44.2c0,12.1-8,26.7-15.8,40.4s-0.9,26-27.7,26.4c-28,0.4-21.5-14.7-29.7-28.4S0.5,56.3,0.5,44.2c0-24.1,19.9-43.7,44.3-43.7S89.1,20,89.1,44.2z"></path>
            </svg>

          </div>

          <div class="control-wrapper" id="copy-inner-wrapper">
            <input type="radio" name="mode" id="copy-inner" value="copy-inner" {{#ifCond req.query.mode "copy-inner"}}checked{{/ifCond}}/>
            <svg id="inner" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 94.9 94.9">
              <rect style="fill: rgb(0, 256, 0);" x="12" y="12" width="71.34" height="71.34"></rect>
            </svg>
            <label for="copy-inner">Copy inner</label>
          </div>

          <div class="control-wrapper" id="copy-outer-wrapper">

            <label for="copy-outer">Copy outer</label>
            <input type="radio" name="mode" id="copy-outer" value="copy-outer" {{#ifCond req.query.mode "copy-outer"}}checked{{/ifCond}}/>
            <svg id="outer" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 94.9 94.9">
              <rect style="fill: transparent; stroke: rgb(0,0,256); stroke-width: 5px" x="12" y="12" width="71.34" height="71.34"></rect>
            </svg>
          </div>

          <div class="control-wrapper">
            <button title="Copy: Copy current, Paint: Travel" style="border-color:rgb({{req.session.colour.red}},{{req.session.colour.green}},{{req.session.colour.blue}}); background-color:rgb({{req.query.redSlider}},{{req.query.greenSlider}},{{req.query.blueSlider}})" id="current" type="submit" name="current" value="current">
              Current
            </button>
          </div>

        </fieldset>

      </div>

    </form>

    <aside id="about">

      <h2>About Coloured Squares</h2>

      <p>Coloured Squares is a social network, art project and web controller. This version was created from scratch for the <a href="https://a-k-apart.com/">A List Apart 10kb challenge</a>.</p>

      <h3>Definitions</h3>

      <dl>
        <dt>Colour</dt>
        <dd>One of around 16 million colours. Made up of red, green and blue values between 0 and 256 each.</dd>
        <dt>User</dt>
        <dd>Every user is assigned a single colour. <strong>Your colour is {{req.session.colour.red}},{{req.session.colour.green}},{{req.session.colour.blue}}</strong>.</dd>
        <dt>Squarefields/squares</dt>
        <dd>For every colour/user there is a squarefield. This consists of 16 squares which store two colour values and a time stamp. The two colours stored are the user who changed the colour and the colour they changed it to.</dd>
      </dl>

      <h3>Controls</h3>

    </aside>

  </main>

  <script src="/client.js"></script>

</body>

</html>
