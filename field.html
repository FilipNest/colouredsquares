<!doctype HTML>

<html>

<head>

  <link rel="stylesheet" href="/client.css">

</head>

<body>

  <form id="squarefield" method="post">

    <input id="red" name="red" max="256" value="{{req.query.red}}" type="range" />
    <br />
    <input id="green" name="green" max="256" value="{{req.query.green}}" type="range" />
    <br />
    <input id="blue" name="blue" max="256" value="{{req.query.blue}}" type="range" />
    <br /> {{#each field.squares}}

    <label for="square_{{@index}}"></label>
    <button type="submit" name="square_{{@index}}" tabindex="0" class="square">
      <div id="author_{{@index}}" style="border-color:rgba({{this.author.red}},{{this.author.green}},{{this.author.blue}},1)" class="author">

        <div id="inner_{{@index}}" data-date="{{this.date}}" class="inner {{this.age}}" style="background-color:rgba({{this.colours.red}},{{this.colours.green}},{{this.colours.blue}},1)">


        </div>

      </div>
    </button>

    {{/each}}

  </form>

  {{#unless req.session.loggedIn}}
  
  {{#if req.query.duplicateColour}}
  
  <span class="error">Duplicate colour</span>
  
  {{/if}}
  
  <div id="user">

    <form method="post" action="/user?path={{req.path}}" id="user">

      <label for="red">Red</label><input name="red" type="number" min="0" max="256">
      <label for="green">Green</label><input name="green" type="number" min="0" max="256">
      <label for="blue">Blue</label><input name="blue" type="number" min="0" max="256">
      <label for="secret">Secret</label><input name="secret" type="text">
      
      <button type="submit" value="new" name="new">New account</button>
      <button type="submit" value="existing" name="login">Login</button>

    </form>

  </div>
  {{/unless}}

  <script>
    window.cs = {};
    cs.squarefield = "{{field.id}}";
    cs.ages = {{ages}};
  </script>

  <script src="/client.js"></script>

</body>

</html>
